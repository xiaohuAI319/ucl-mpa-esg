# 使用指南

## 🚀 快速开始

### 第一次使用

1. **配置Supabase连接**
   - 点击左侧边栏的 **⚙️ 设置中心**
   - 在"Supabase配置"标签中输入：
     - Supabase URL（来自项目设置）
     - Supabase匿名密钥（anon key）
   - 点击 **测试连接**，确保显示成功

2. **配置AI模型**
   - 切换到"AI配置"标签
   - 至少配置一个AI模型的API Key：
     - **OpenAI GPT**：适合高质量学术分析（较贵）
     - **DeepSeek**：性价比高，推荐日常使用
     - **Gemini**：免费配额，适合测试
   - 点击 **保存配置**

3. **上传第一份文档**
   - 点击 **📚 知识库管理**
   - 点击 **上传文件** 或直接拖拽文件
   - 支持格式：`.txt`, `.md`, `.pdf`, `.docx`, `.pptx`
   - 等待解析完成（状态变为✓）

4. **开始对话**
   - 点击 **💬 AI聊天室**
   - 选择AI模型（右上角下拉框）
   - 输入问题，例如：
     - "总结我的笔记中关于ESG的内容"
     - "公共政策分析的主要框架是什么？"
   - AI会基于你的知识库回答

---

## 📚 知识库管理

### 文件夹组织

**创建文件夹**
- 点击 **新建文件夹**
- 输入名称，例如：`Week 1 - Introduction`, `Case Studies`
- 文件夹会显示在左侧列表

**组织结构建议**
```
UCL MPA ESG Notes/
├── Week 1 - Policy Frameworks/
│   ├── lecture-slides.pdf
│   └── reading-notes.md
├── Week 2 - ESG Analysis/
│   ├── case-study.docx
│   └── my-notes.txt
└── Assignments/
    └── essay-outline.md
```

### 文件上传

**支持的格式**
- ✅ `.txt` - 纯文本笔记
- ✅ `.md` - Markdown笔记（支持格式）
- ✅ `.pdf` - 课程讲义、论文
- ✅ `.docx` - Word文档
- ✅ `.pptx` - PowerPoint课件

**上传方式**
1. **点击上传**：选择一个或多个文件
2. **拖拽上传**：直接拖动文件到上传区域
3. **批量上传**：一次性选择多个文件

**解析状态**
- ⏳ 解析中：正在提取文本内容
- ✓ 已解析：可以在聊天中使用
- ❌ 解析失败：文件格式不支持或损坏

### 文件管理

**查看文件**
- 点击文件名查看详情
- 显示文件大小、上传时间、解析状态

**删除文件**
- 点击文件旁的 **删除** 按钮
- ⚠️ 删除后无法恢复，相关的向量数据也会被清除

**文件夹操作**
- **重命名**：点击文件夹名称编辑
- **删除**：删除文件夹会同时删除内部所有文件

---

## 💬 AI聊天室

### 基本使用

**发送消息**
- 在底部输入框输入问题
- 按 `Enter` 发送（`Shift+Enter` 换行）
- 等待AI回复（3-10秒）

**查看引用来源**
- AI回复会标注来自哪些文档
- 点击来源链接可跳转到原文档

**对话历史**
- 所有对话自动保存到Supabase
- 可在右侧边栏查看历史会话
- 点击历史会话可恢复上下文

### 模型选择

**GPT-4o**（OpenAI）
- ✅ 分析深度最好
- ✅ 多语言支持优秀
- ❌ 成本较高（~$0.005/1K tokens）
- 适合：重要作业、论文大纲、深度分析

**DeepSeek**
- ✅ 性价比极高（便宜25倍）
- ✅ 中文支持优秀
- ✅ 推理能力强
- 适合：日常笔记整理、快速查询

**Gemini 2.0**（Google）
- ✅ 免费配额充足
- ✅ 响应速度快
- ⚠️ 学术分析能力一般
- 适合：基础问答、快速查找

**切换技巧**
- 普通问题用Gemini（省钱）
- 重要分析用GPT-4o（质量）
- 大量使用选DeepSeek（平衡）

### 提示词编辑

**自定义System Prompt**
- 在左下角的"提示词编辑器"中修改
- 预设模板：
  - 学术助手（UCL风格）
  - 自由对话
  - 代码助手
- 实时生效，影响后续所有对话

**示例提示词**
```
你是伦敦大学学院（UCL）公共管理硕士（MPA）项目的学术助手。
你的任务是基于我提供的课程笔记和学术材料，帮助我：
1. 理解复杂的政策分析框架
2. 准备考试和作业
3. 总结和提炼关键概念

回答风格：
- 学术严谨，引用具体来源
- 结构清晰，分点说明
- 适当举例，联系实际案例
- 必要时提供中英文对照
```

---

## ⚙️ 设置中心

### Supabase配置

**必需设置**
- Supabase URL: 你的项目URL
- Anon Key: 匿名公钥（在项目设置→API中获取）

**测试连接**
- 配置后务必点击"测试连接"
- 成功后会显示数据库状态

### AI配置

**OpenAI**
```
API Key: sk-proj-xxxxxxxxxxxxx
Base URL: https://api.openai.com/v1
模型: gpt-4o 或 gpt-4o-mini
```

**DeepSeek**
```
API Key: sk-xxxxxxxxxxxxx
Base URL: https://api.deepseek.com/v1
模型: deepseek-chat
```

**Gemini**
```
API Key: AIzaSyxxxxxxxxxxxxx
Base URL: https://generativelanguage.googleapis.com/v1beta
模型: gemini-2.0-flash-exp
```

**获取API Key**
- OpenAI: https://platform.openai.com/api-keys
- DeepSeek: https://platform.deepseek.com/api_keys
- Gemini: https://makersuite.google.com/app/apikey

### 网络搜索（未来功能）

- 开启后，AI会在回答时搜索学术数据库
- 支持Google Scholar、Semantic Scholar、arXiv
- 可设置最大搜索结果数

---

## 🎓 使用场景

### 场景1：复习考试

**操作步骤**
1. 上传所有课程PPT和笔记
2. 在聊天室问：
   - "总结Week 1-4的核心概念"
   - "公共政策的三种分析框架是什么？"
   - "ESG评估的关键指标有哪些？"

### 场景2：写作业

**操作步骤**
1. 上传相关阅读材料和案例
2. 提问：
   - "帮我列出关于[主题]的论文大纲"
   - "这个案例可以用哪些理论框架分析？"
   - "总结作者的主要观点和论据"

### 场景3：整理笔记

**操作步骤**
1. 上传原始课堂笔记（可能很乱）
2. 提问：
   - "将这份笔记整理成结构化大纲"
   - "提取笔记中的关键术语并解释"
   - "生成这份笔记的思维导图"

### 场景4：查找信息

**操作步骤**
1. 输入问题，AI会搜索知识库
2. 例如：
   - "在哪份材料中提到了制度分析？"
   - "找出所有关于气候政策的内容"
   - "作者在第几页讨论了这个观点？"

---

## 💡 使用技巧

### 提高回答质量

1. **上传高质量文档**
   - 文字清晰的PDF（非扫描版）
   - 结构化的笔记（使用标题、列表）
   - 完整的句子（而非零碎片段）

2. **提供明确问题**
   - ❌ "讲讲ESG"
   - ✅ "总结我的笔记中ESG评估的三大支柱及其指标"

3. **逐步深入**
   - 先问概述："ESG的核心概念是什么？"
   - 再问细节："E（环境）指标具体包括哪些？"
   - 最后应用："如何用ESG框架分析特斯拉？"

### 节省成本

1. **优先使用DeepSeek**
   - 日常查询用DeepSeek（便宜25倍）
   - 只在关键任务用GPT-4o

2. **合并问题**
   - ❌ 分3次问："概念是什么？""有什么例子？""如何应用？"
   - ✅ 一次问："解释概念、举例、并说明如何应用"

3. **利用免费Gemini**
   - 测试和简单问答用Gemini
   - 每天有充足免费配额

### 组织笔记

**按周次组织**
```
Week 1 - Introduction/
Week 2 - Policy Analysis/
Week 3 - ESG Fundamentals/
...
```

**按主题组织**
```
Theory/
Case Studies/
Assignments/
Reading Notes/
```

**按类型组织**
```
Lectures/
Readings/
My Notes/
Group Work/
```

---

## ⚠️ 注意事项

### 隐私安全

- ✅ 数据存储在你的Supabase项目（你拥有完全控制）
- ✅ API Key存储在浏览器本地（不上传服务器）
- ⚠️ 不要上传敏感个人信息
- ⚠️ AI API提供商会看到你的对话（遵守其隐私政策）

### 文件限制

- 单个文件建议 < 10MB（Supabase免费版限制）
- 总存储空间 500MB（免费版）
- 如果文件太大，考虑分割或升级Supabase计划

### AI限制

- AI可能产生幻觉（编造信息）
- 重要论述务必查阅原始文献
- AI是辅助工具，不能替代批判性思考

---

## 🛠 故障排查

### 无法连接Supabase
- 检查URL和Key是否正确
- 确保Supabase项目处于活跃状态
- 检查浏览器控制台错误信息

### 文件上传失败
- 检查文件格式是否支持
- 确认Storage bucket已创建并配置权限
- 尝试更小的文件测试

### AI不回复
- 检查API Key是否有效且有余额
- 查看浏览器控制台是否有错误
- 尝试切换不同的模型

### 搜索不到文档内容
- 确保文档已成功解析（状态为✓）
- 检查documents表是否有数据
- 等待几秒后重试（向量生成需要时间）

---

需要帮助？参考 `DEPLOYMENT.md` 查看部署详情，或检查GitHub Issues。
